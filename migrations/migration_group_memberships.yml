id: migration_group_memberships
label: 'Migrate Group Memberships'
migration_tags:
  - 'Drupal 7'
  - 'Organic Groups'
migration_group: insert_group
source:
  plugin: migration_group_d7_og_membership
  og_group_type: node
  entity_type: user
  group_type: working_group
  content_plugin: group_membership
process:
  type: group_content_type_id
  gid: gid
  entity_id: etid
  created: created
  group_roles:
    plugin: iterator
    source: roles
    process:
      plugin: migration_lookup
      migration: migration_group_roles
      source: rid
destination:
  plugin: entity:group_content
migration_dependencies:
  required:
    - migration_group_roles
